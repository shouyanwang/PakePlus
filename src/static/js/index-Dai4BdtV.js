import{a as M,p as D,b as W,c as E,d as X}from"./point-DzWu9cnT.js";import{_ as Y,d as Z,r as i,e as n,D as A,c as ee,o as v,f as $,h as a,E as b,i as o,A as y,j as f,F as le}from"./index-v815L3Uz.js";const ae={class:"search-form"},te={class:"dialog-footer"},oe={__name:"index",setup(ue){const{proxy:p}=Z(),s=i({keyword:"",status:"",page:1,per_page:10}),U=i(0),w=i(!1),P=i([]),F=()=>({backgroundColor:"#F6F8FF",color:"#C5C5C5"}),_=async()=>{w.value=!0;const d=await M(s.value);w.value=!1,P.value=d.data.data,U.value=d.data.total};_();const S=()=>{s.value.page=1,_()},T=i(null),l=i({name:"",status:"",med_guid:"",tcm_sdt:"",med_care:"",rehab_ther:"",nutri_diet:"",psy_couns:"",ex_pres:"",daily_care:"",exo:""}),j=i({name:[{required:!0,message:"请输入名称",trigger:"blur"}],tcm_sdt:[{required:!0,message:"请输入中医证治",trigger:"blur"}],med_care:[{required:!0,message:"请输入医疗护理",trigger:"blur"}],rehab_ther:[{required:!0,message:"请输入康复治疗",trigger:"blur"}],nutri_diet:[{required:!0,message:"请输入营养膳食",trigger:"blur"}],psy_couns:[{required:!0,message:"请输入心理指导",trigger:"blur"}],ex_pres:[{required:!0,message:"请输入运动处方",trigger:"blur"}],daily_care:[{required:!0,message:"请输入生活照护",trigger:"blur"}]}),m=i(!1),C=i(""),k=()=>{l.value.id="",Object.keys(l.value).forEach(d=>{l.value[d]=""}),l.value.status=1,p.resetForm("formRef")},N=()=>{k(),C.value="新增知识库",m.value=!0},R=async d=>{k();const e=await E({id:d.id});m.value=!0,C.value="修改知识库",Object.keys(l.value).forEach(u=>{l.value[u]=e.data[u]}),l.value.type=Number(e.data.type),l.value.status=Number(e.data.status),l.value.id=d.id},B=async(d,e)=>{const u=await E({id:e.id});Object.keys(l.value).forEach(r=>{l.value[r]=u.data[r]}),l.value.id=e.id,await D({...l.value,status:d}),p.$modal.msgSuccess("修改成功")},O=()=>{m.value=!1,k()},H=()=>{p.$refs.formRef.validate(async d=>{d&&(l.value.id!=""?(await D(l.value),p.$modal.msgSuccess("修改成功"),m.value=!1,_()):(await W(l.value),p.$modal.msgSuccess("新增成功"),m.value=!1,_()))})},I=d=>{p.$modal.confirm("是否确认删除知识库?").then(async()=>{await X({id:d.id}),p.$modal.msgSuccess("删除成功"),_()}).catch(()=>{})};return(d,e)=>{const u=n("el-input"),r=n("el-form-item"),h=n("el-col"),c=n("el-button"),L=n("el-row"),q=n("el-form"),G=n("Dialog"),V=n("el-table-column"),Q=n("el-switch"),z=n("el-table"),J=n("Pagination"),x=A("hasPermi"),K=A("loading");return v(),ee(le,null,[$("div",ae,[a(q,{model:s.value,ref:"queryRef"},{default:o(()=>[a(L,{gutter:30},{default:o(()=>[a(h,{span:8},{default:o(()=>[a(r,{label:"知识库名称",prop:"keyword"},{default:o(()=>[a(u,{modelValue:s.value.keyword,"onUpdate:modelValue":e[0]||(e[0]=t=>s.value.keyword=t),placeholder:"请输入知识库名称",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),a(h,{span:8},{default:o(()=>[a(r,null,{default:o(()=>[b((v(),y(c,{type:"primary",icon:"Search",onClick:S},{default:o(()=>e[14]||(e[14]=[f("查询")])),_:1,__:[14]})),[[x,["GET.point"]]]),b((v(),y(c,{icon:"plus",type:"primary",onClick:N},{default:o(()=>e[15]||(e[15]=[f("新增知识库")])),_:1,__:[15]})),[[x,["POST.point"]]])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),a(G,{modelValue:m.value,"onUpdate:modelValue":e[11]||(e[11]=t=>m.value=t),title:C.value,width:"936"},{footer:o(()=>[$("div",te,[a(c,{onClick:O},{default:o(()=>e[16]||(e[16]=[f("取消")])),_:1,__:[16]}),a(c,{type:"primary",onClick:H},{default:o(()=>e[17]||(e[17]=[f(" 确认 ")])),_:1,__:[17]})])]),default:o(()=>[a(q,{model:l.value,rules:j.value,ref_key:"formRef",ref:T,"label-position":"top"},{default:o(()=>[a(r,{label:"知识库名称",prop:"name"},{default:o(()=>[a(u,{modelValue:l.value.name,"onUpdate:modelValue":e[1]||(e[1]=t=>l.value.name=t),placeholder:"请输入知识库名称"},null,8,["modelValue"])]),_:1}),a(r,{label:"药物指导",prop:"med_guid"},{default:o(()=>[a(u,{modelValue:l.value.med_guid,"onUpdate:modelValue":e[2]||(e[2]=t=>l.value.med_guid=t),type:"textarea",rows:4,placeholder:"请输入描述"},null,8,["modelValue"])]),_:1}),a(r,{label:"中医证治",prop:"tcm_sdt"},{default:o(()=>[a(u,{modelValue:l.value.tcm_sdt,"onUpdate:modelValue":e[3]||(e[3]=t=>l.value.tcm_sdt=t),type:"textarea",rows:4,placeholder:"请输入描述"},null,8,["modelValue"])]),_:1}),a(r,{label:"医疗护理",prop:"med_care"},{default:o(()=>[a(u,{modelValue:l.value.med_care,"onUpdate:modelValue":e[4]||(e[4]=t=>l.value.med_care=t),type:"textarea",rows:4,placeholder:"请输入描述"},null,8,["modelValue"])]),_:1}),a(r,{label:"康复治疗",prop:"rehab_ther"},{default:o(()=>[a(u,{modelValue:l.value.rehab_ther,"onUpdate:modelValue":e[5]||(e[5]=t=>l.value.rehab_ther=t),type:"textarea",rows:4,placeholder:"请输入描述"},null,8,["modelValue"])]),_:1}),a(r,{label:"营养膳食",prop:"nutri_diet"},{default:o(()=>[a(u,{modelValue:l.value.nutri_diet,"onUpdate:modelValue":e[6]||(e[6]=t=>l.value.nutri_diet=t),type:"textarea",rows:4,placeholder:"请输入描述"},null,8,["modelValue"])]),_:1}),a(r,{label:"心理指导",prop:"psy_couns"},{default:o(()=>[a(u,{modelValue:l.value.psy_couns,"onUpdate:modelValue":e[7]||(e[7]=t=>l.value.psy_couns=t),type:"textarea",rows:4,placeholder:"请输入描述"},null,8,["modelValue"])]),_:1}),a(r,{label:"运动处方",prop:"ex_pres"},{default:o(()=>[a(u,{modelValue:l.value.ex_pres,"onUpdate:modelValue":e[8]||(e[8]=t=>l.value.ex_pres=t),type:"textarea",rows:4,placeholder:"请输入描述"},null,8,["modelValue"])]),_:1}),a(r,{label:"生活照护",prop:"daily_care"},{default:o(()=>[a(u,{modelValue:l.value.daily_care,"onUpdate:modelValue":e[9]||(e[9]=t=>l.value.daily_care=t),type:"textarea",rows:4,placeholder:"请输入描述"},null,8,["modelValue"])]),_:1}),a(r,{label:"专家意见",prop:"exo"},{default:o(()=>[a(u,{modelValue:l.value.exo,"onUpdate:modelValue":e[10]||(e[10]=t=>l.value.exo=t),type:"textarea",rows:4,placeholder:"请输入描述"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]),b((v(),y(z,{class:"base-info-table",data:P.value,"header-cell-style":F},{default:o(()=>[a(V,{prop:"name",label:"知识库名称",align:"center"}),a(V,{prop:"status",label:"状态",align:"center"},{default:o(({row:t})=>[a(Q,{modelValue:t.status,"onUpdate:modelValue":g=>t.status=g,"active-value":1,"inactive-value":0,onChange:g=>B(g,t)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),a(V,{prop:"created_at",label:"时间",align:"center"}),a(V,{prop:"action",label:"操作",align:"center",width:"160"},{default:o(({row:t})=>[b((v(),y(c,{type:"primary",plain:"",onClick:g=>R(t)},{default:o(()=>e[18]||(e[18]=[f("修改")])),_:2,__:[18]},1032,["onClick"])),[[x,["PATCH.point/{point}"]]]),b((v(),y(c,{type:"danger",plain:"",onClick:g=>I(t)},{default:o(()=>e[19]||(e[19]=[f("删除")])),_:2,__:[19]},1032,["onClick"])),[[x,["DELETE.point/{point}"]]])]),_:1})]),_:1},8,["data"])),[[K,w.value]]),a(J,{total:U.value,layout:"total, prev, pager, next, jumper",page:s.value.page,"onUpdate:page":e[12]||(e[12]=t=>s.value.page=t),limit:s.value.per_page,"onUpdate:limit":e[13]||(e[13]=t=>s.value.per_page=t),onPagination:_},null,8,["total","page","limit"])],64)}}},ne=Y(oe,[["__scopeId","data-v-dff40fef"]]);export{ne as default};
