import{b as I,a as c,d as k,r as f,w as y,e as r,A as C,o as q,i as o,h as l,j as m,T as S}from"./index-BCPe6f7k.js";const $={__name:"userInfo",setup(R){const i=I(),g=c(),{proxy:d}=k(),a=f({}),v=f({avatar:[{required:!0,message:"请上传头像",trigger:"change"}],user_name:[{required:!0,message:"用户昵称不能为空",trigger:"blur"}],email:[{required:!0,message:"邮箱地址不能为空",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],mobile:[{required:!0,message:"手机号码不能为空",trigger:"blur"},{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}]});function b(){d.$refs.userRef.validate(async t=>{t&&(await S(a.value),await i.getInfo(),d.$modal.msgSuccess("修改成功"))})}function V(){g.back()}return y(()=>i.userInfo,t=>{t&&(a.value={avatar:t.avatar,user_name:t.user_name,mobile:t.mobile,email:t.email,sex:t.sex})},{immediate:!0}),(t,e)=>{const x=r("ImageUpload"),n=r("el-form-item"),s=r("el-input"),p=r("el-radio"),U=r("el-radio-group"),_=r("el-button"),w=r("el-form");return q(),C(w,{ref:"userRef",model:a.value,rules:v.value,"label-width":"80px"},{default:o(()=>[l(n,{label:"用户头像",prop:"avatar"},{default:o(()=>[l(x,{modelValue:a.value.avatar,"onUpdate:modelValue":e[0]||(e[0]=u=>a.value.avatar=u),isShowTip:!1,limit:1},null,8,["modelValue"])]),_:1}),l(n,{label:"用户昵称",prop:"user_name"},{default:o(()=>[l(s,{modelValue:a.value.user_name,"onUpdate:modelValue":e[1]||(e[1]=u=>a.value.user_name=u),maxlength:"30"},null,8,["modelValue"])]),_:1}),l(n,{label:"手机号码",prop:"mobile"},{default:o(()=>[l(s,{modelValue:a.value.mobile,"onUpdate:modelValue":e[2]||(e[2]=u=>a.value.mobile=u),maxlength:"11"},null,8,["modelValue"])]),_:1}),l(n,{label:"邮箱",prop:"email"},{default:o(()=>[l(s,{modelValue:a.value.email,"onUpdate:modelValue":e[3]||(e[3]=u=>a.value.email=u),maxlength:"50"},null,8,["modelValue"])]),_:1}),l(n,{label:"性别"},{default:o(()=>[l(U,{modelValue:a.value.sex,"onUpdate:modelValue":e[4]||(e[4]=u=>a.value.sex=u)},{default:o(()=>[l(p,{value:1},{default:o(()=>e[5]||(e[5]=[m("男")])),_:1,__:[5]}),l(p,{value:2},{default:o(()=>e[6]||(e[6]=[m("女")])),_:1,__:[6]})]),_:1},8,["modelValue"])]),_:1}),l(n,null,{default:o(()=>[l(_,{type:"primary",onClick:b},{default:o(()=>e[7]||(e[7]=[m("保存")])),_:1,__:[7]}),l(_,{onClick:V},{default:o(()=>e[8]||(e[8]=[m("关闭")])),_:1,__:[8]})]),_:1})]),_:1},8,["model","rules"])}}};export{$ as default};
