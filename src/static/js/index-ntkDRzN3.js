import{a as Z,p as $,b as ee,c as F,d as ae}from"./roomType-MJIgRMX0.js";import{_ as le,d as te,r as d,e as n,D as S,c as oe,o as v,f as h,h as a,E as b,i as l,A as V,j as i,F as ne}from"./index-B9Da-5fK.js";const se={class:"search-form"},ue={class:"dialog-footer"},de={__name:"index",setup(re){const{proxy:p}=te(),u=d({keyword:"",status:"",page:1,per_page:10}),w=d(!1),U=d(0),x=d([]),j=()=>({backgroundColor:"#F6F8FF",color:"#C5C5C5"}),c=async()=>{w.value=!0;const s=await Z(u.value);w.value=!1,x.value=s.data.data,U.value=s.data.total};c();const q=()=>{u.value.page=1,c()},B=d(null),o=d({name:"",status:""}),O=d({name:[{required:!0,message:"请输入名称",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]}),m=d(!1),T=d(""),R=()=>{o.value.id="",Object.keys(o.value).forEach(s=>{o.value[s]=""}),o.value.status=1,p.resetForm("formRef")},N=()=>{R(),T.value="新增房间类型",m.value=!0},H=async s=>{R();const e=await F({id:s.id});m.value=!0,T.value="修改房间类型",Object.keys(o.value).forEach(_=>{o.value[_]=e.data[_]}),o.value.id=s.id},I=async(s,e)=>{const _=await F({id:e.id});Object.keys(o.value).forEach(r=>{o.value[r]=_.data[r]}),o.value.id=e.id,await $({...o.value,status:s}),p.$modal.msgSuccess("修改成功")},L=()=>{m.value=!1,R()},G=()=>{p.$refs.formRef.validate(async s=>{s&&(o.value.id!=""?(await $(o.value),p.$modal.msgSuccess("修改成功"),m.value=!1,c()):(await ee(o.value),p.$modal.msgSuccess("新增成功"),m.value=!1,c()))})},Q=s=>{p.$modal.confirm("是否确认删除房间类型?").then(async()=>{await ae({id:s.id}),p.$modal.msgSuccess("删除成功"),c()}).catch(()=>{})};return(s,e)=>{const _=n("el-input"),r=n("el-form-item"),g=n("el-col"),D=n("el-option"),z=n("el-select"),f=n("el-button"),E=n("el-row"),A=n("el-form"),P=n("el-radio"),J=n("el-radio-group"),K=n("Dialog"),C=n("el-table-column"),M=n("el-switch"),W=n("el-table"),X=n("Pagination"),k=S("hasPermi"),Y=S("loading");return v(),oe(ne,null,[h("div",se,[a(A,{model:u.value,ref:"queryRef"},{default:l(()=>[a(E,{gutter:30},{default:l(()=>[a(g,{span:8},{default:l(()=>[a(r,{label:"名称",prop:"keyword"},{default:l(()=>[a(_,{modelValue:u.value.keyword,"onUpdate:modelValue":e[0]||(e[0]=t=>u.value.keyword=t),placeholder:"请输入名称",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),a(g,{span:8},{default:l(()=>[a(r,{label:"状态",prop:"status"},{default:l(()=>[a(z,{modelValue:u.value.status,"onUpdate:modelValue":e[1]||(e[1]=t=>u.value.status=t),placeholder:"请选择状态",clearable:""},{default:l(()=>[a(D,{label:"正常",value:1}),a(D,{label:"禁用",value:0})]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(g,{span:8},{default:l(()=>[a(r,null,{default:l(()=>[b((v(),V(f,{type:"primary",icon:"Search",onClick:q},{default:l(()=>e[7]||(e[7]=[i("查询")])),_:1,__:[7]})),[[k,["GET.room_type"]]]),b((v(),V(f,{icon:"plus",type:"primary",onClick:N},{default:l(()=>e[8]||(e[8]=[i("新增")])),_:1,__:[8]})),[[k,["POST.room_type"]]])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),a(K,{modelValue:m.value,"onUpdate:modelValue":e[4]||(e[4]=t=>m.value=t),title:T.value,width:"936"},{footer:l(()=>[h("div",ue,[a(f,{onClick:L},{default:l(()=>e[11]||(e[11]=[i("取消")])),_:1,__:[11]}),a(f,{type:"primary",onClick:G},{default:l(()=>e[12]||(e[12]=[i(" 确认 ")])),_:1,__:[12]})])]),default:l(()=>[a(A,{model:o.value,rules:O.value,ref_key:"formRef",ref:B,"label-position":"top"},{default:l(()=>[a(E,{gutter:52},{default:l(()=>[a(g,{span:12},{default:l(()=>[a(r,{label:"名称",prop:"name"},{default:l(()=>[a(_,{modelValue:o.value.name,"onUpdate:modelValue":e[2]||(e[2]=t=>o.value.name=t),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1})]),_:1}),a(g,{span:12},{default:l(()=>[a(r,{label:"状态",prop:"status"},{default:l(()=>[a(J,{modelValue:o.value.status,"onUpdate:modelValue":e[3]||(e[3]=t=>o.value.status=t)},{default:l(()=>[a(P,{value:1},{default:l(()=>e[9]||(e[9]=[i("正常")])),_:1,__:[9]}),a(P,{value:0},{default:l(()=>e[10]||(e[10]=[i("禁用")])),_:1,__:[10]})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]),b((v(),V(W,{class:"base-info-table",data:x.value,"header-cell-style":j},{default:l(()=>[a(C,{prop:"name",label:"名称",align:"center"}),a(C,{prop:"status",label:"状态",align:"center"},{default:l(({row:t})=>[a(M,{modelValue:t.status,"onUpdate:modelValue":y=>t.status=y,"active-value":1,"inactive-value":0,onChange:y=>I(y,t)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),a(C,{prop:"created_at",label:"创建时间",align:"center"}),a(C,{prop:"action",label:"操作",align:"center",width:"160"},{default:l(({row:t})=>[b((v(),V(f,{type:"primary",plain:"",onClick:y=>H(t)},{default:l(()=>e[13]||(e[13]=[i("修改")])),_:2,__:[13]},1032,["onClick"])),[[k,["PATCH.room_type/{room_type}"]]]),b((v(),V(f,{type:"danger",plain:"",onClick:y=>Q(t)},{default:l(()=>e[14]||(e[14]=[i("删除")])),_:2,__:[14]},1032,["onClick"])),[[k,["DELETE.room_type/{room_type}"]]])]),_:1})]),_:1},8,["data"])),[[Y,w.value]]),a(X,{total:U.value,layout:"total, prev, pager, next, jumper",page:u.value.page,"onUpdate:page":e[5]||(e[5]=t=>u.value.page=t),limit:u.value.per_page,"onUpdate:limit":e[6]||(e[6]=t=>u.value.per_page=t),onPagination:c},null,8,["total","page","limit"])],64)}}},me=le(de,[["__scopeId","data-v-15a89ba3"]]);export{me as default};
