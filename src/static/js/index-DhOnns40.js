import{p as U,g as z,a as E}from"./corporeity-Du-IITUG.js";import{u as F}from"./elder-CmRUkR9v.js";import R from"./Tag-CzANPWdN.js";import{_ as j,d as J,r as p,w as L,e as m,c as d,o as s,f as n,h as f,F as g,v,A as b,i as l,j as C,t as c,x as W,p as u,R as X}from"./index-DWZ4RG6E.js";const q="/static/png/identify-DNzX6NJv.png",G={class:"constitution hide-scrollbar"},H={class:"form-item-title"},K={style:{width:"800px","white-space":"normal"}},M={class:"dialog-footer"},O={__name:"index",setup(P){const{proxy:k}=J(),_=F(),w=p({}),A=async()=>{const o=await z({elder_id:_.elder.id});w.value=o.data};L(()=>_.elder,o=>{o.id&&A()},{immediate:!0});const i=p({}),N=async()=>{const o=await E({elder_id:_.elder.id,corporeity_category_id:y.value});i.value=o.data},y=p(""),r=p(!1),S=async o=>{y.value=o.id,await N(),r.value=!0},h=()=>{r.value=!1},B=async()=>{for(const e of i.value.list)if(!e.radio){k.$modal.msgWarning(`请回答问题${e.no}、${e.title}`);return}const o=i.value.list.map(e=>({corporeity_topic_id:e.id,corporeity_topic_option_id:e.radio}));await U({elder_id:_.elder.id,corporeity_category_id:y.value,answers:o}),k.$modal.msgSuccess("提交成功"),r.value=!1};return(o,e)=>{var x,$;const D=m("el-radio"),T=m("el-radio-group"),V=m("el-button"),I=m("Dialog");return s(),d(g,null,[n("div",G,[(s(!0),d(g,null,v(u(w).list,(t,a)=>(s(),b(R,{class:W(`tag${a+1}`),key:a,item:t,onClick:Q=>S(t)},{default:l(()=>[C(c(t.name),1)]),_:2},1032,["class","item","onClick"]))),128)),e[1]||(e[1]=n("img",{class:"img",src:q,alt:""},null,-1))]),f(I,{modelValue:u(r),"onUpdate:modelValue":e[0]||(e[0]=t=>X(r)?r.value=t:null),title:(x=u(i).category_info)==null?void 0:x.name,desc:($=u(i).category_info)==null?void 0:$.prompt,width:"909"},{footer:l(()=>[n("div",M,[f(V,{onClick:h},{default:l(()=>e[3]||(e[3]=[C("取消")])),_:1,__:[3]}),f(V,{type:"primary",onClick:B},{default:l(()=>e[4]||(e[4]=[C(" 确认 ")])),_:1,__:[4]})])]),default:l(()=>[(s(!0),d(g,null,v(u(i).list,t=>(s(),d("div",{key:t.id,class:"form-item"},[n("div",H,c(t.no)+"、"+c(t.title),1),e[2]||(e[2]=n("div",{class:"form-item-desc"},null,-1)),f(T,{modelValue:t.radio,"onUpdate:modelValue":a=>t.radio=a},{default:l(()=>[(s(!0),d(g,null,v(t.option,a=>(s(),b(D,{key:a.id,value:a.id},{default:l(()=>[n("div",K,c(a.no)+"."+c(a.option),1)]),_:2},1032,["value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]))),128))]),_:1},8,["modelValue","title","desc"])],64)}}},oe=j(O,[["__scopeId","data-v-0f47a782"]]);export{oe as default};
