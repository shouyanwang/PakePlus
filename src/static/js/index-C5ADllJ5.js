import{a as T,g as U}from"./index-DUIlgPjs.js";import{_ as W,r as s,w as j,e as r,D,c as G,o as i,E as v,h as l,A as d,i as a,j as p,t as V,B as F,f as q,F as z}from"./index-B9Da-5fK.js";import{u as H}from"./elder-B5owq764.js";/* empty css                                                              */import I from"./Report-DYL8AxGK.js";import"./jspdf.es.min-LKm_IDpI.js";import"./index-Cn7K6gb9.js";const L={class:"dialog-footer"},$={__name:"index",setup(J){const c=H(),u=s({page:1,per_page:10}),_=s(!1),b=s(0),y=s([]),P=()=>({backgroundColor:"#F6F8FF",color:"#C5C5C5"}),k=async()=>{_.value=!0;const o=await U({elder_id:c.elder.id,...u.value});_.value=!1,y.value=o.data.data,b.value=o.data.total};j(()=>c.elder,o=>{o.id&&k()},{immediate:!0});const m=s(!1),g=s({}),E=async o=>{const e=await T({id:o.scale_id,elder_id:c.elder.id});g.value=e.data,g.value.scale_name=o.scale.name,m.value=!0},f=s(null),R=async()=>{f.value&&await f.value.generatePDF()};return(o,e)=>{const n=r("el-table-column"),w=r("el-tag"),C=r("el-button"),B=r("el-table"),N=r("Dialog"),S=r("Pagination"),x=D("hasPermi"),A=D("loading");return i(),G(z,null,[v((i(),d(B,{class:"base-info-table",data:y.value,"header-cell-style":P},{default:a(()=>[l(n,{prop:"scale",label:"评估名称",align:"center"},{default:a(({row:t})=>[p(V(t.scale.name),1)]),_:1}),l(n,{prop:"scale_set",label:"评估类型",align:"center"},{default:a(({row:t})=>[p(V(t.scale_set.name),1)]),_:1}),l(n,{prop:"status",label:"评估状态",align:"center"},{default:a(({row:t})=>[t.status==0?(i(),d(w,{key:0,type:"primary"},{default:a(()=>e[3]||(e[3]=[p(" 进行中 ")])),_:1,__:[3]})):F("",!0),t.status==1?(i(),d(w,{key:1,type:"success"},{default:a(()=>e[4]||(e[4]=[p(" 已完成 ")])),_:1,__:[4]})):F("",!0)]),_:1}),l(n,{prop:"created_at",label:"评估时间",align:"center"}),l(n,{prop:"results",label:"评估结果",align:"center"}),l(n,{prop:"action",label:"操作",align:"center",width:"120"},{default:a(t=>[v((i(),d(C,{type:"primary",plain:"",size:"default",onClick:K=>E(t.row)},{default:a(()=>e[5]||(e[5]=[p("获取结果")])),_:2,__:[5]},1032,["onClick"])),[[x,["GET.workstation/{scale}/result"]]])]),_:1})]),_:1},8,["data"])),[[A,_.value]]),l(N,{modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=t=>m.value=t),title:"评估结果",width:"909"},{footer:a(()=>[q("div",L,[v((i(),d(C,{type:"primary",onClick:R},{default:a(()=>e[6]||(e[6]=[p("打印")])),_:1,__:[6]})),[[x,["GET.workstation/{result}/export"]]])])]),default:a(()=>[l(I,{ref_key:"reportRef",ref:f,data:g.value},null,8,["data"])]),_:1},8,["modelValue"]),l(S,{class:"pagination",total:b.value,layout:"total, prev, pager, next, jumper",page:u.value.page,"onUpdate:page":e[1]||(e[1]=t=>u.value.page=t),limit:u.value.per_page,"onUpdate:limit":e[2]||(e[2]=t=>u.value.per_page=t),onPagination:k},null,8,["total","page","limit"])],64)}}},ee=W($,[["__scopeId","data-v-3d2580b9"]]);export{ee as default};
