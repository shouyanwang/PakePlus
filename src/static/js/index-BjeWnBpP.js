import{s as w,q as D,_ as R,d as z,u as J,r as v,w as K,e as s,D as M,c as f,o as i,h as t,i as l,j as b,t as r,E as T,A as $,f as u,F as h,v as A}from"./index-DWZ4RG6E.js";import{u as O}from"./elder-CmRUkR9v.js";function Q(n={}){return w({url:"/bms/v1/survey_elder",method:"GET",params:D(n)})}function W(n={}){return w({url:`/bms/v1/survey_elder/${n.id}`,method:"GET",params:D(n)})}function X(n={}){return w({url:`/bms/v1/survey_elder/${n.id}`,method:"DELETE",params:D(n)})}const Y={class:"form-value"},Z={class:"form-value"},ee={class:"form-value"},te={class:"form-value"},ae={class:"form-value"},le={__name:"index",setup(n){const{proxy:E}=z(),C=O();J();const _=v({page:1,per_page:10}),k=v(!1),x=v(0),S=v([]),B=()=>({backgroundColor:"#F6F8FF",color:"#C5C5C5"}),g=async()=>{k.value=!0;const o=await Q({elder_id:C.elder.id,..._.value});k.value=!1,S.value=o.data.data,x.value=o.data.total};K(()=>C.elder,o=>{o.id&&g()},{immediate:!0});const y=v(!1),d=v({}),L=async o=>{const a=await W({id:o.id});d.value=a.data,y.value=!0},G=o=>{E.$modal.confirm("是否确认删除?").then(async()=>{await X({id:o.id}),E.$modal.msgSuccess("删除成功"),g()}).catch(()=>{})};return(o,a)=>{const p=s("el-table-column"),V=s("el-button"),N=s("el-table"),m=s("el-form-item"),U=s("el-form"),j=s("Dialog"),q=s("Pagination"),F=M("hasPermi");return i(),f(h,null,[t(N,{class:"base-info-table",data:S.value,"header-cell-style":B},{default:l(()=>[t(p,{type:"index",label:"序号",align:"center",width:"120"}),t(p,{prop:"survey_name",label:"问卷名称",align:"center"}),t(p,{prop:"survey",label:"问卷描述",align:"center","show-overflow-tooltip":""},{default:l(({row:e})=>{var c;return[b(r((c=e.survey)==null?void 0:c.description),1)]}),_:1}),t(p,{prop:"created_at",label:"填写问卷时间",align:"center"}),t(p,{prop:"action",label:"操作",align:"center",width:"200"},{default:l(({row:e})=>[T((i(),$(V,{type:"primary",plain:"",onClick:c=>L(e)},{default:l(()=>a[3]||(a[3]=[b("查看详情")])),_:2,__:[3]},1032,["onClick"])),[[F,["GET.survey_elder/{survey_elder}"]]]),T((i(),$(V,{type:"danger",plain:"",onClick:c=>G(e)},{default:l(()=>a[4]||(a[4]=[b("删除")])),_:2,__:[4]},1032,["onClick"])),[[F,["DELETE.survey_elder/{survey_elder}"]]])]),_:1})]),_:1},8,["data"]),t(j,{modelValue:y.value,"onUpdate:modelValue":a[0]||(a[0]=e=>y.value=e),title:"查看问卷详情",width:"1020"},{default:l(()=>[t(U,{"label-width":"100","label-position":"left"},{default:l(()=>[t(m,{label:"问卷名称"},{default:l(()=>[u("div",Y,r(d.value.survey.name),1)]),_:1}),t(m,{label:"问卷描述"},{default:l(()=>[u("div",Z,r(d.value.survey.description),1)]),_:1}),t(m,{label:"问卷题目数量"},{default:l(()=>{var e;return[u("div",ee,r((e=d.value.result)==null?void 0:e.length)+"题",1)]}),_:1}),t(m,{label:"问卷内容"},{default:l(()=>[u("div",te,[(i(!0),f(h,null,A(d.value.result,(e,c)=>{var P;return i(),f("div",{key:c},[u("div",null,r(e.topic),1),(i(!0),f(h,null,A((P=e.options)==null?void 0:P.split("|,|"),(I,H)=>(i(),f("div",{key:H},r(I),1))),128)),u("div",null,"结果："+r(e.result),1)])}),128))])]),_:1}),t(m,{label:"填写问卷时间"},{default:l(()=>[u("div",ae,r(d.value.created_at),1)]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(q,{total:x.value,layout:"total, prev, pager, next, jumper",page:_.value.page,"onUpdate:page":a[1]||(a[1]=e=>_.value.page=e),limit:_.value.per_page,"onUpdate:limit":a[2]||(a[2]=e=>_.value.per_page=e),onPagination:g},null,8,["total","page","limit"])],64)}}},re=R(le,[["__scopeId","data-v-55149a70"]]);export{re as default};
