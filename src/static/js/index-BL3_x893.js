import{g as U,d as W}from"./index-CbSnCnmH.js";import{_ as j,r as s,w as T,e as r,D as w,c as q,o as u,E as D,h as l,A as d,i as a,j as i,t as x,B as V,f as z,F as G}from"./index-BCPe6f7k.js";import{u as H}from"./elder-DaZm3efB.js";/* empty css                                                              */import I from"./Report-CHTP-8hJ.js";import"./jspdf.es.min-DaAeb2LW.js";import"./index-BNhONTND.js";const L={class:"dialog-footer"},$={__name:"index",setup(J){const c=H(),p=s({page:1,per_page:10}),_=s(!1),v=s(0),b=s([]),F=()=>({backgroundColor:"#F6F8FF",color:"#C5C5C5"}),y=async()=>{_.value=!0;const o=await W({elder_id:c.elder.id,...p.value});_.value=!1,b.value=o.data.data,v.value=o.data.total};T(()=>c.elder,o=>{o.id&&y()},{immediate:!0});const m=s(!1),g=s({}),P=async o=>{const e=await U({id:o.scale_id,elder_id:c.elder.id});g.value=e.data,g.value.scale_name=o.scale.name,m.value=!0},f=s(null),R=async()=>{f.value&&await f.value.generatePDF()};return(o,e)=>{const n=r("el-table-column"),k=r("el-tag"),C=r("el-button"),B=r("el-table"),E=r("Dialog"),N=r("Pagination"),S=w("hasPermi"),A=w("loading");return u(),q(G,null,[D((u(),d(B,{class:"base-info-table",data:b.value,"header-cell-style":F},{default:a(()=>[l(n,{prop:"scale",label:"评估名称",align:"center"},{default:a(({row:t})=>[i(x(t.scale.name),1)]),_:1}),l(n,{prop:"scale_set",label:"评估类型",align:"center"},{default:a(({row:t})=>[i(x(t.scale_set.name),1)]),_:1}),l(n,{prop:"status",label:"评估状态",align:"center"},{default:a(({row:t})=>[t.status==0?(u(),d(k,{key:0,type:"primary"},{default:a(()=>e[3]||(e[3]=[i(" 进行中 ")])),_:1,__:[3]})):V("",!0),t.status==1?(u(),d(k,{key:1,type:"success"},{default:a(()=>e[4]||(e[4]=[i(" 已完成 ")])),_:1,__:[4]})):V("",!0)]),_:1}),l(n,{prop:"created_at",label:"评估时间",align:"center"}),l(n,{prop:"results",label:"评估结果",align:"center"}),l(n,{prop:"action",label:"操作",align:"center",width:"120"},{default:a(t=>[D((u(),d(C,{type:"primary",plain:"",size:"default",onClick:K=>P(t.row)},{default:a(()=>e[5]||(e[5]=[i("获取结果")])),_:2,__:[5]},1032,["onClick"])),[[S,["GET.workstation/{scale}/result"]]])]),_:1})]),_:1},8,["data"])),[[A,_.value]]),l(E,{modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=t=>m.value=t),title:"评估结果",width:"909"},{footer:a(()=>[z("div",L,[l(C,{type:"primary",onClick:R},{default:a(()=>e[6]||(e[6]=[i("打印")])),_:1,__:[6]})])]),default:a(()=>[l(I,{ref_key:"reportRef",ref:f,data:g.value},null,8,["data"])]),_:1},8,["modelValue"]),l(N,{class:"pagination",total:v.value,layout:"total, prev, pager, next, jumper",page:p.value.page,"onUpdate:page":e[1]||(e[1]=t=>p.value.page=t),limit:p.value.per_page,"onUpdate:limit":e[2]||(e[2]=t=>p.value.per_page=t),onPagination:y},null,8,["total","page","limit"])],64)}}},ee=j($,[["__scopeId","data-v-b1bff761"]]);export{ee as default};
