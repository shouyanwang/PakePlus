import{b as T,c as q}from"./corporeity-sQbcDynh.js";import{_ as z,r,w as G,e as s,D as x,c as f,o as n,E as V,h as l,A as d,i as a,B as F,j as p,F as P,v as H,t as I,f as $}from"./index-gubRP18q.js";import{u as J}from"./elder-DBu0Okgw.js";/* empty css                                                              */import K from"./Result-DrffirYA.js";import"./jspdf.es.min-uZZ0fheg.js";import"./index-PIvSEPGS.js";const M={class:"dialog-footer"},O={__name:"index",setup(Q){const c=J(),i=r({page:1,per_page:10}),_=r(!1),y=r(0),b=r([]),R=()=>({backgroundColor:"#F6F8FF",color:"#C5C5C5"}),k=async()=>{_.value=!0;const o=await q({elder_id:c.elder.id,...i.value});_.value=!1,b.value=o.data.data,y.value=o.data.total};G(()=>c.elder,o=>{o.id&&k()},{immediate:!0});const m=r(!1),g=r({}),B=async o=>{const e=await T({result_id:o.id,elder_id:c.elder.id});console.log(e.data,"-------"),g.value=e.data,g.value.name=o.name,m.value=!0},v=r(null),E=async()=>{v.value&&await v.value.generatePDF()};return(o,e)=>{const u=s("el-table-column"),C=s("el-tag"),w=s("el-button"),N=s("el-table"),S=s("Dialog"),A=s("Pagination"),U=x("hasPermi"),j=x("loading");return n(),f(P,null,[V((n(),d(N,{class:"base-info-table",data:b.value,"header-cell-style":R},{default:a(()=>[l(u,{prop:"name",label:"评估名称",align:"center"}),l(u,{prop:"status",label:"评估状态",align:"center"},{default:a(({row:t})=>[t.status==0?(n(),d(C,{key:0,type:"primary"},{default:a(()=>e[3]||(e[3]=[p(" 进行中 ")])),_:1,__:[3]})):F("",!0),t.status==1?(n(),d(C,{key:1,type:"success"},{default:a(()=>e[4]||(e[4]=[p(" 已完成 ")])),_:1,__:[4]})):F("",!0)]),_:1}),l(u,{prop:"updated_at",label:"评估时间",align:"center"}),l(u,{prop:"result",label:"评估结果",align:"center"},{default:a(({row:t})=>[(n(!0),f(P,null,H(t.result,(D,L)=>(n(),f("span",{key:L},I(D.category)+"、",1))),128))]),_:1}),l(u,{prop:"action",label:"操作",align:"center",width:"120"},{default:a(t=>[V((n(),d(w,{type:"primary",plain:"",size:"default",onClick:D=>B(t.row)},{default:a(()=>e[5]||(e[5]=[p("查看结果")])),_:2,__:[5]},1032,["onClick"])),[[U,["GET.corporeity/result"]]])]),_:1})]),_:1},8,["data"])),[[j,_.value]]),l(S,{modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=t=>m.value=t),title:"中医体质辨识报告",width:"1200"},{footer:a(()=>[$("div",M,[l(w,{type:"primary",onClick:E},{default:a(()=>e[6]||(e[6]=[p("打印报告")])),_:1,__:[6]})])]),default:a(()=>[l(K,{ref_key:"resultRef",ref:v,data:g.value},null,8,["data"])]),_:1},8,["modelValue"]),l(A,{class:"pagination",total:y.value,layout:"total, prev, pager, next, jumper",page:i.value.page,"onUpdate:page":e[1]||(e[1]=t=>i.value.page=t),limit:i.value.per_page,"onUpdate:limit":e[2]||(e[2]=t=>i.value.per_page=t),onPagination:k},null,8,["total","page","limit"])],64)}}},ae=z(O,[["__scopeId","data-v-e0d9ab93"]]);export{ae as default};
