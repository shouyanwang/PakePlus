import{a as Z,p as F,b as ee,c as j,d as le}from"./scaleSet-CH4yhRsR.js";import{_ as ae,d as te,r as d,e as s,D as P,c as oe,o as v,f as x,h as l,E as y,i as a,A as V,j as c,F as se}from"./index-BCPe6f7k.js";const ne={class:"search-form"},ue={style:{display:"flex","justify-content":"space-between"}},de={class:"dialog-footer"},ie={__name:"index",setup(re){const{proxy:i}=te(),R=[{label:"评估类型",value:"1"},{label:"评估结果",value:"2"}],T={label:"label",value:"value"},g=d({type:"1",status:""}),C=d(!1),D=d([]),q=()=>({backgroundColor:"#F6F8FF",color:"#C5C5C5"}),_=async()=>{C.value=!0;const n=await Z(g.value);C.value=!1,D.value=n.data};_();const B=d(null),t=d({name:"",type:"",status:""}),O=d({name:[{required:!0,message:"请输入名称",trigger:"blur"}],type:[{required:!0,message:"请选择类型",trigger:"change"}]}),r=d(!1),S=d(""),k=()=>{t.value.id="",Object.keys(t.value).forEach(n=>{t.value[n]=""}),t.value.status=1,i.resetForm("formRef")},N=()=>{k(),S.value="新增",r.value=!0},H=async n=>{k();const e=await j({id:n.id});r.value=!0,S.value="修改",Object.keys(t.value).forEach(p=>{t.value[p]=e.data[p]}),t.value.id=n.id},I=async(n,e)=>{const p=await j({id:e.id});Object.keys(t.value).forEach(u=>{t.value[u]=p.data[u]}),t.value.id=e.id,await F({...t.value,status:n}),i.$modal.msgSuccess("修改成功")},L=()=>{r.value=!1,k()},z=()=>{i.$refs.formRef.validate(async n=>{n&&(t.value.id!=""?(await F(t.value),i.$modal.msgSuccess("修改成功"),r.value=!1,_()):(await ee(t.value),i.$modal.msgSuccess("新增成功"),r.value=!1,_()))})},G=n=>{i.$modal.confirm("是否确认删除?").then(async()=>{await le({id:n.id}),i.$modal.msgSuccess("删除成功"),_()}).catch(()=>{})};return(n,e)=>{const p=s("el-segmented"),u=s("el-form-item"),m=s("el-button"),A=s("el-form"),J=s("el-input"),b=s("el-col"),E=s("el-option"),K=s("el-select"),U=s("el-row"),$=s("el-radio"),M=s("el-radio-group"),Q=s("Dialog"),w=s("el-table-column"),W=s("el-switch"),X=s("el-table"),h=P("hasPermi"),Y=P("loading");return v(),oe(se,null,[x("div",ne,[l(A,{model:g.value,ref:"queryRef","label-position":"top"},{default:a(()=>[x("div",ue,[l(u,null,{default:a(()=>[l(p,{modelValue:g.value.type,"onUpdate:modelValue":e[0]||(e[0]=o=>g.value.type=o),options:R,props:T,onChange:_},null,8,["modelValue"])]),_:1}),l(u,null,{default:a(()=>[y((v(),V(m,{icon:"plus",type:"primary",onClick:N},{default:a(()=>e[5]||(e[5]=[c("新增")])),_:1,__:[5]})),[[h,["POST.scale_set"]]])]),_:1})])]),_:1},8,["model"])]),l(Q,{modelValue:r.value,"onUpdate:modelValue":e[4]||(e[4]=o=>r.value=o),title:S.value,width:"936"},{footer:a(()=>[x("div",de,[l(m,{onClick:L},{default:a(()=>e[8]||(e[8]=[c("取消")])),_:1,__:[8]}),l(m,{type:"primary",onClick:z},{default:a(()=>e[9]||(e[9]=[c(" 确认 ")])),_:1,__:[9]})])]),default:a(()=>[l(A,{model:t.value,rules:O.value,ref_key:"formRef",ref:B,"label-position":"top"},{default:a(()=>[l(U,{gutter:52},{default:a(()=>[l(b,{span:12},{default:a(()=>[l(u,{label:"名称",prop:"name"},{default:a(()=>[l(J,{modelValue:t.value.name,"onUpdate:modelValue":e[1]||(e[1]=o=>t.value.name=o),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1})]),_:1}),l(b,{span:12},{default:a(()=>[l(u,{label:"类型",prop:"type"},{default:a(()=>[l(K,{modelValue:t.value.type,"onUpdate:modelValue":e[2]||(e[2]=o=>t.value.type=o),placeholder:"请选择类型"},{default:a(()=>[l(E,{label:"评估类型",value:1}),l(E,{label:"评估结果",value:2})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(U,{gutter:56},{default:a(()=>[l(b,{span:12},{default:a(()=>[l(u,{label:"状态",prop:"status"},{default:a(()=>[l(M,{modelValue:t.value.status,"onUpdate:modelValue":e[3]||(e[3]=o=>t.value.status=o)},{default:a(()=>[l($,{value:1},{default:a(()=>e[6]||(e[6]=[c("激活")])),_:1,__:[6]}),l($,{value:0},{default:a(()=>e[7]||(e[7]=[c("禁用")])),_:1,__:[7]})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(b,{span:12})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]),y((v(),V(X,{class:"base-info-table",data:D.value,"header-cell-style":q},{default:a(()=>[l(w,{prop:"name",label:"评估类型",align:"center"}),l(w,{prop:"status",label:"评估状态",align:"center"},{default:a(({row:o})=>[l(W,{modelValue:o.status,"onUpdate:modelValue":f=>o.status=f,"active-value":1,"inactive-value":0,onChange:f=>I(f,o)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),l(w,{prop:"action",label:"操作",align:"center",width:"160"},{default:a(({row:o})=>[y((v(),V(m,{type:"primary",plain:"",onClick:f=>H(o)},{default:a(()=>e[10]||(e[10]=[c("修改")])),_:2,__:[10]},1032,["onClick"])),[[h,["PATCH.scale_set/{scale_set}"]]]),y((v(),V(m,{type:"danger",plain:"",onClick:f=>G(o)},{default:a(()=>e[11]||(e[11]=[c("删除")])),_:2,__:[11]},1032,["onClick"])),[[h,["DELETE.scale_set/{scale_set}"]]])]),_:1})]),_:1},8,["data"])),[[Y,C.value]])],64)}}},_e=ae(ie,[["__scopeId","data-v-6512bcb1"]]);export{_e as default};
