import{a as ae,p as H,b as te,c as j,d as oe}from"./healthSet-De_ekgup.js";import{_ as ne,d as se,r as i,e as n,D as N,c as ue,o as d,f as D,h as l,E as k,i as a,A as r,j as v,B as C,F as de}from"./index-v815L3Uz.js";const ie={class:"search-form"},re={style:{display:"flex","justify-content":"space-between"}},pe={class:"dialog-footer"},me={__name:"index",setup(ce){const{proxy:m}=se(),B=[{label:"慢病管理",value:"1"},{label:"药物名称",value:"2"},{label:"服药方法",value:"3"},{label:"用药剂量",value:"4"},{label:"用药频率",value:"5"}],R={label:"label",value:"value"},u=i({type:"1",status:"",page:1,per_page:10}),A=i(0),w=i(!1),E=i([]),T=()=>({backgroundColor:"#F6F8FF",color:"#C5C5C5"}),f=async()=>{w.value=!0;const s=await ae(u.value);w.value=!1,E.value=s.data.data,A.value=s.data.total};f();const q=i(null),t=i({name:"",type:"",status:""}),O=i({name:[{required:!0,message:"请输入名称",trigger:"blur"}],type:[{required:!0,message:"请选择类型",trigger:"change"}]}),c=i(!1),S=i(""),x=()=>{t.value.id="",Object.keys(t.value).forEach(s=>{t.value[s]=""}),t.value.status=1,m.resetForm("formRef")},I=()=>{x(),S.value="新增",c.value=!0},L=async s=>{x();const e=await j({id:s.id});c.value=!0,S.value="修改",Object.keys(t.value).forEach(g=>{t.value[g]=e.data[g]}),t.value.type=Number(e.data.type),t.value.status=Number(e.data.status),t.value.id=s.id},z=async(s,e)=>{const g=await j({id:e.id});Object.keys(t.value).forEach(p=>{t.value[p]=g.data[p]}),t.value.id=e.id,await H({...t.value,status:s}),m.$modal.msgSuccess("修改成功")},G=()=>{c.value=!1,x()},J=()=>{m.$refs.formRef.validate(async s=>{s&&(t.value.id!=""?(await H(t.value),m.$modal.msgSuccess("修改成功"),c.value=!1,f()):(await te(t.value),m.$modal.msgSuccess("新增成功"),c.value=!1,f()))})},K=s=>{m.$modal.confirm("是否确认删除?").then(async()=>{await oe({id:s.id}),m.$modal.msgSuccess("删除成功"),f()}).catch(()=>{})};return(s,e)=>{const g=n("el-segmented"),p=n("el-form-item"),b=n("el-button"),P=n("el-form"),M=n("el-input"),h=n("el-col"),y=n("el-option"),Q=n("el-select"),$=n("el-row"),F=n("el-radio"),W=n("el-radio-group"),X=n("Dialog"),_=n("el-table-column"),Y=n("el-switch"),Z=n("el-table"),ee=n("Pagination"),U=N("hasPermi"),le=N("loading");return d(),ue(de,null,[D("div",ie,[l(P,{model:u.value,ref:"queryRef","label-position":"top"},{default:a(()=>[D("div",re,[l(p,null,{default:a(()=>[l(g,{modelValue:u.value.type,"onUpdate:modelValue":e[0]||(e[0]=o=>u.value.type=o),options:B,props:R,onChange:f},null,8,["modelValue"])]),_:1}),l(p,null,{default:a(()=>[k((d(),r(b,{icon:"plus",type:"primary",onClick:I},{default:a(()=>e[7]||(e[7]=[v("新增")])),_:1,__:[7]})),[[U,["POST.health_set"]]])]),_:1})])]),_:1},8,["model"])]),l(X,{modelValue:c.value,"onUpdate:modelValue":e[4]||(e[4]=o=>c.value=o),title:S.value,width:"936"},{footer:a(()=>[D("div",pe,[l(b,{onClick:G},{default:a(()=>e[10]||(e[10]=[v("取消")])),_:1,__:[10]}),l(b,{type:"primary",onClick:J},{default:a(()=>e[11]||(e[11]=[v(" 确认 ")])),_:1,__:[11]})])]),default:a(()=>[l(P,{model:t.value,rules:O.value,ref_key:"formRef",ref:q,"label-position":"top"},{default:a(()=>[l($,{gutter:52},{default:a(()=>[l(h,{span:12},{default:a(()=>[l(p,{label:"名称",prop:"name"},{default:a(()=>[l(M,{modelValue:t.value.name,"onUpdate:modelValue":e[1]||(e[1]=o=>t.value.name=o),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1})]),_:1}),l(h,{span:12},{default:a(()=>[l(p,{label:"类型",prop:"type"},{default:a(()=>[l(Q,{modelValue:t.value.type,"onUpdate:modelValue":e[2]||(e[2]=o=>t.value.type=o),placeholder:"请选择类型"},{default:a(()=>[l(y,{label:"慢病管理",value:1}),l(y,{label:"药物名称",value:2}),l(y,{label:"服药方法",value:3}),l(y,{label:"用药剂量",value:4}),l(y,{label:"用药频率",value:5})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l($,{gutter:56},{default:a(()=>[l(h,{span:12},{default:a(()=>[l(p,{label:"状态",prop:"status"},{default:a(()=>[l(W,{modelValue:t.value.status,"onUpdate:modelValue":e[3]||(e[3]=o=>t.value.status=o)},{default:a(()=>[l(F,{value:1},{default:a(()=>e[8]||(e[8]=[v("激活")])),_:1,__:[8]}),l(F,{value:0},{default:a(()=>e[9]||(e[9]=[v("禁用")])),_:1,__:[9]})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(h,{span:12})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]),k((d(),r(Z,{class:"base-info-table",data:E.value,"header-cell-style":T},{default:a(()=>[u.value.type=="1"?(d(),r(_,{key:0,prop:"name",label:"疾病诊断",align:"center"})):C("",!0),u.value.type=="2"?(d(),r(_,{key:1,prop:"name",label:"药物名称",align:"center"})):C("",!0),u.value.type=="3"?(d(),r(_,{key:2,prop:"name",label:"服药方法",align:"center"})):C("",!0),u.value.type=="4"?(d(),r(_,{key:3,prop:"name",label:"用药剂量",align:"center"})):C("",!0),u.value.type=="5"?(d(),r(_,{key:4,prop:"name",label:"用药频率",align:"center"})):C("",!0),l(_,{prop:"status",label:"状态",align:"center"},{default:a(({row:o})=>[l(Y,{modelValue:o.status,"onUpdate:modelValue":V=>o.status=V,"active-value":"1","inactive-value":"0",onChange:V=>z(V,o)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),l(_,{prop:"action",label:"操作",align:"center",width:"160"},{default:a(({row:o})=>[k((d(),r(b,{type:"primary",plain:"",onClick:V=>L(o)},{default:a(()=>e[12]||(e[12]=[v("修改")])),_:2,__:[12]},1032,["onClick"])),[[U,["PATCH.health_set/{health_set}"]]]),k((d(),r(b,{type:"danger",plain:"",onClick:V=>K(o)},{default:a(()=>e[13]||(e[13]=[v("删除")])),_:2,__:[13]},1032,["onClick"])),[[U,["DELETE.health_set/{health_set}"]]])]),_:1})]),_:1},8,["data"])),[[le,w.value]]),l(ee,{total:A.value,layout:"total, prev, pager, next, jumper",page:u.value.page,"onUpdate:page":e[5]||(e[5]=o=>u.value.page=o),limit:u.value.per_page,"onUpdate:limit":e[6]||(e[6]=o=>u.value.per_page=o),onPagination:f},null,8,["total","page","limit"])],64)}}},fe=ne(me,[["__scopeId","data-v-45e028f7"]]);export{fe as default};
