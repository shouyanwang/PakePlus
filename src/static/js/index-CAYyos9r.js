import{g as N,a as S}from"./index-DUIlgPjs.js";import{u as A}from"./elder-B5owq764.js";import U from"./Report-DYL8AxGK.js";import{_ as j,r as n,w as T,e as r,D as W,c as q,o as u,h as a,i as l,j as i,t as w,A as g,B as x,E as z,f as G,F as H}from"./index-B9Da-5fK.js";import"./jspdf.es.min-LKm_IDpI.js";import"./index-Cn7K6gb9.js";const I={class:"dialog-footer"},L={__name:"index",setup($){const d=A(),p=n({page:1,per_page:10}),f=n(!1),v=n(0),b=n([]),D=()=>({backgroundColor:"#F6F8FF",color:"#C5C5C5"}),y=async()=>{f.value=!0;const o=await N({elder_id:d.elder.id,...p.value});f.value=!1,b.value=o.data.data,v.value=o.data.total};T(()=>d.elder,o=>{o.id&&y()},{immediate:!0});const c=n(!1),_=n({}),V=async o=>{const e=await S({id:o.scale_id,elder_id:d.elder.id});_.value=e.data,_.value.scale_name=o.scale.name,c.value=!0},m=n(null),F=async()=>{m.value&&await m.value.generatePDF()};return(o,e)=>{const s=r("el-table-column"),k=r("el-tag"),C=r("el-button"),P=r("el-table"),R=r("Dialog"),B=r("Pagination"),E=W("hasPermi");return u(),q(H,null,[a(P,{class:"base-info-table",data:b.value,"header-cell-style":D},{default:l(()=>[a(s,{prop:"scale",label:"评估名称",align:"center"},{default:l(({row:t})=>[i(w(t.scale.name),1)]),_:1}),a(s,{prop:"type",label:"评估类型",align:"center"},{default:l(({row:t})=>[i(w(t.scale_set.name),1)]),_:1}),a(s,{prop:"status",label:"评估状态",align:"center"},{default:l(({row:t})=>[t.status==0?(u(),g(k,{key:0,type:"primary"},{default:l(()=>e[3]||(e[3]=[i(" 进行中 ")])),_:1,__:[3]})):x("",!0),t.status==1?(u(),g(k,{key:1,type:"success"},{default:l(()=>e[4]||(e[4]=[i(" 已完成 ")])),_:1,__:[4]})):x("",!0)]),_:1}),a(s,{prop:"created_at",label:"评估时间",align:"center"}),a(s,{prop:"results",label:"评估结果",align:"center"}),a(s,{prop:"action",label:"操作",align:"center",width:"120"},{default:l(t=>[z((u(),g(C,{type:"primary",plain:"",size:"default",onClick:J=>V(t.row)},{default:l(()=>e[5]||(e[5]=[i("获取结果")])),_:2,__:[5]},1032,["onClick"])),[[E,["GET.workstation/{scale}/result"]]])]),_:1})]),_:1},8,["data"]),a(R,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=t=>c.value=t),title:"评估结果",width:"909"},{footer:l(()=>[G("div",I,[a(C,{type:"primary",onClick:F},{default:l(()=>e[6]||(e[6]=[i("打印")])),_:1,__:[6]})])]),default:l(()=>[a(U,{ref_key:"reportRef",ref:m,data:_.value},null,8,["data"])]),_:1},8,["modelValue"]),a(B,{total:v.value,layout:"total, prev, pager, next, jumper",page:p.value.page,"onUpdate:page":e[1]||(e[1]=t=>p.value.page=t),limit:p.value.per_page,"onUpdate:limit":e[2]||(e[2]=t=>p.value.per_page=t),onPagination:y},null,8,["total","page","limit"])],64)}}},Z=j(L,[["__scopeId","data-v-b6260d16"]]);export{Z as default};
