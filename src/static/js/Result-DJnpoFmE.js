import{E as w,h as S}from"./jspdf.es.min-D-d0jyKN.js";import{_ as D,r as E,e as F,c as f,o as R,f as t,h as v,j as q,t as s,i as M,O as C,F as y,v as K,Q as k}from"./index-DWZ4RG6E.js";const T="/static/png/gauge-BstTlSm2.png",L="data:image/png;base64,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",I={class:"wrap"},O={class:"user-wrap"},P={class:"username"},N={class:"text"},Y={class:"info-wrap"},Q={class:"info-item"},J={class:"value"},X={class:"info-item"},Z={class:"value"},H={class:"info-item"},j={class:"value"},_={class:"info-item"},z={class:"value"},G={class:"wrap"},W={class:"gauge-wrap"},$={class:"val"},tt={class:"wrap"},et={class:"sub-title"},at={__name:"Result",props:{data:{type:Object,default:()=>{}}},setup(o,{expose:x}){const B=c=>c/100*220-110,V=E(null);return x({generatePDF:async()=>{const c=k.service({lock:!0,text:"正在生成PDF，请稍候..."}),e=V.value,i=new w({orientation:"p",unit:"mm",format:"a4"}),A=i.internal.pageSize.getHeight(),p=i.internal.pageSize.getWidth(),r=15,m=A-2*r,a=await S(e,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#FFFFFF",scrollY:0}),n=p-2*r,b=a.height*n/a.width,h=Math.ceil(b/m);for(let l=0;l<h;l++){l>0&&i.addPage();const u=l*m*(a.width/n),d=Math.min(m*(a.width/n),a.height-u),g=document.createElement("canvas");g.width=a.width,g.height=d,g.getContext("2d").drawImage(a,0,u,a.width,d,0,0,a.width,d),i.addImage(g.toDataURL("image/jpeg",.95),"JPEG",r,r,n,d*(n/a.width))}window.open(i.output("bloburl")),c.close()}}),(c,e)=>{var m,a,n,b,h,l,u;const i=F("svg-icon"),A=F("el-button"),p=F("el-table-column"),r=F("el-table");return R(),f("div",{ref_key:"elementToPrint",ref:V,class:"pageCon"},[e[10]||(e[10]=t("h1",{class:"pageTitle"},"综合能力评估结果",-1)),t("div",I,[e[4]||(e[4]=t("div",{class:"title"},"长者信息",-1)),t("div",O,[t("div",P,[t("div",N,[v(i,{"icon-class":"user-2",class:"svg-icon"}),q(" "+s((m=o.data.elder)==null?void 0:m.name),1)]),v(A,{type:"primary",round:""},{default:M(()=>[q(s(c.statusFormat(o.data.elder.status)),1)]),_:1})]),t("div",Y,[t("div",Q,[e[0]||(e[0]=t("div",{class:"label"},"年龄",-1)),t("div",J,s((a=o.data.elder)==null?void 0:a.age),1)]),t("div",X,[e[1]||(e[1]=t("div",{class:"label"},"性别",-1)),t("div",Z,s(c.genderFormat((n=o.data.elder)==null?void 0:n.sex)),1)]),t("div",H,[e[2]||(e[2]=t("div",{class:"label"},"科别",-1)),t("div",j,s((b=o.data.elder.epartmene)==null?void 0:b.name),1)]),t("div",_,[e[3]||(e[3]=t("div",{class:"label"},"床位号",-1)),t("div",z,s((h=o.data.elder)==null?void 0:h.building.name)+"/"+s((l=o.data.elder)==null?void 0:l.room.name)+"/"+s((u=o.data.elder)==null?void 0:u.bed.name),1)])])])]),t("div",G,[e[8]||(e[8]=t("div",{class:"title"},"测评得分",-1)),t("div",W,[e[6]||(e[6]=t("img",{class:"img",src:T,alt:""},null,-1)),t("div",$,s(o.data.result.score),1),e[7]||(e[7]=t("div",{class:"label"},"得分",-1)),t("div",{class:"rotating-disc",style:C({transform:`translateX(-50%) rotate(${B(o.data.result.score)}deg)`})},e[5]||(e[5]=[t("img",{class:"pointer",src:L,alt:""},null,-1)]),4)])]),t("div",tt,[e[9]||(e[9]=t("div",{class:"title"},"题目和选项",-1)),(R(!0),f(y,null,K(o.data.elder_topic,(d,g)=>(R(),f("div",{key:g},[t("div",et,s(d.name),1),v(r,{data:d.topic,border:"",style:{width:"90%",margin:"30px auto"}},{default:M(()=>[v(p,{prop:"topic",label:"题目",align:"center"}),v(p,{prop:"option",label:"选项",align:"center"},{default:M(({row:U})=>[q(s(U.no)+"、"+s(U.option),1)]),_:1})]),_:2},1032,["data"])]))),128))])],512)}}},nt=D(at,[["__scopeId","data-v-8247414a"]]);export{nt as default};
